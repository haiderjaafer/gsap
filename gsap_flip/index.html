<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flip for GSAP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Initial state - logo style */
        .container.final {
            display: flex;
            flex-direction: row-reverse;
            gap: 5px;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
        }

        .container.final .letter {
            width: 150px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: #1a1a2e;
            border-radius: 5px;
        }

        .container.final .letter.F {
            background: linear-gradient(135deg, #2dd4bf, #3b82f6);
        }

        .container.final .letter.l {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
        }

        .container.final .letter.i {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
        }

        .container.final .letter.p {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }

        .container.final .letter.q {
            background: linear-gradient(135deg, #fa709a, #fee140);
            width: 110px;
        }

        .container.final .for {
            font-size: 20px;
            color: white;
            margin-left: 20px;
            font-weight: normal;
        }

        .container.final .gsap {
            font-size: 18px;
            color: white;
            font-weight: bold;
            display: none;
        }

        /* Plain layout */
        .container.plain {
            display: flex;
            flex-direction: row-reverse;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }

        .container.plain .letter {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            color: #1a1a2e;
        }

        .container.plain .letter.F {
            background: #2dd4bf;
        }

        .container.plain .letter.l {
            background: #3b82f6;
        }

        .container.plain .letter.i {
            background: #8b5cf6;
        }

        .container.plain .letter.p {
            background: #6366f1;
        }

        .container.plain .letter.q {
            background: #fa709a;
        }

        .container.plain .for,
        .container.plain .gsap {
            display: none;
        }

        /* Columns layout */
        .container.columns {
            display: grid;
            grid-template-columns: repeat(3, 200px);
            grid-template-rows: auto auto;
            gap: 0;
            row-gap: 0;
            width: auto;
            height: auto;
        }

        .container.columns .letter {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #1a1a2e;
            border: 1px solid rgba(0, 0, 0, 0.1);
            height: 100px;
        }

        .container.columns .letter.F {
            background: #2dd4bf;
            grid-column: 1;
            grid-row: 1;
        }

        .container.columns .letter.l {
            background: #3b82f6;
            grid-column: 2;
            grid-row: 1;
        }

        .container.columns .letter.i {
            background: #8b5cf6;
            grid-column: 3;
            grid-row: 1;
        }

        .container.columns .letter.p {
            background: #6366f1;
            grid-column: 2;
            grid-row: 2;
            border-right: none;
        }

        .container.columns .letter.q {
            background: #fa709a;
            grid-column: 3;
            grid-row: 2;
            border-left: none;
        }

        .container.columns .for,
        .container.columns .gsap {
            display: none;
        }

        /* Grid layout */
        .container.grid {
            display: grid;
            grid-template-columns: repeat(3, 210px);
            grid-template-rows: auto auto;
            gap: 5px;
            row-gap: 0;
            column-gap: 5px;
            width: auto;
            height: auto;
        }

        .container.grid .letter {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #1a1a2e;
            border-radius: 10px;
            height: 100px;
        }

        .container.grid .letter.F {
            background: linear-gradient(135deg, #2dd4bf, #3b82f6);
            grid-column: 1;
            grid-row: 1;
        }

        .container.grid .letter.l {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            grid-column: 2;
            grid-row: 1;
        }

        .container.grid .letter.i {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            grid-column: 3;
            grid-row: 1;
        }

        .container.grid .letter.p {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            grid-column: 2;
            grid-row: 2;
            margin-left: 2.5px;
            border-radius: 10px 0 0 10px;
        }

        .container.grid .letter.q {
            background: linear-gradient(135deg, #fa709a, #fee140);
            grid-column: 3;
            grid-row: 2;
            margin-right: 2.5px;
            border-radius: 0 10px 10px 0;
        }

        .container.grid .for,
        .container.grid .gsap {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container final">
        <div class="letter F">شركة</div>
        <div class="letter l">مصافي</div>
        <div class="letter i">الوسط</div>
        <div class="letter p">مصفى</div>
        <div class="letter q">الدورة</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Flip.min.js"></script>
    
    <script>
        gsap.registerPlugin(Flip);

        let layouts = ["final", "plain", "columns", "grid"],
            container = document.querySelector(".container"),
            curLayout = 0; // index of the current layout

        function nextState() {
            const state = Flip.getState(".letter, .for, .gsap", {props: "color,backgroundColor"});
            
            container.classList.remove(layouts[curLayout]); // remove old class
            curLayout = (curLayout + 1) % layouts.length; // increment (loop back to 0 if at end)
            container.classList.add(layouts[curLayout]); // add the new class
            
            Flip.from(state, {
                absolute: true,
                stagger: 0.07,
                duration: 0.7,
                ease: "power2.inOut",
                spin: curLayout === 0, // only spin when going to the first layout
                simple: true,
                onEnter: (elements, animation) => gsap.fromTo(elements, {opacity: 0}, {opacity: 1, delay: animation ? animation.duration() : 0}),
                onLeave: elements => gsap.to(elements, {opacity: 0})
            });
            
            gsap.delayedCall(curLayout === 0 ? 3.5 : 1.5, nextState);
        }

        gsap.delayedCall(1, nextState);
    </script>
</body>
</html>